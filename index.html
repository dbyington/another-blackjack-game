<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="css/Blackjack.css" />
    <script src="javascript/Blackjack.js"></script>
    <script src="javascript/jquery-3.1.1.min.js"></script>
    <title>Blackjack: Would you like to play a game?</title>
  </head>
  <body>
    <div class="body-table">
    <div class="header table-row">
      <h1>Blackjack, let's play</h1>
    </div>
    <div class="dealer-space table-row">
      <div id="shoe" class="table-col">


      </div>
      <div class="dealer table-col">Dealer Hand
        <div id="dealer-hand" class="handCards table-row">

        </div>
      </div>
      <div class="table-col">
      <div id="discard-pile" class="discard table-row">
      </div>
    </div>
      <div id="dealer-value" class="value table-row">
      </div>
    </div>
    <div class="table-row">
      <div class="table-col"> <div class="button" id="deal">Deal</div> </div>
      <div class="table-col" id="hand-result"></div>
    </div>
    <div class="players table-row">
      <div id="0" style="float: right" class="table-col"><span class="player-name" title="Double click to change player's name">Player</span>
        <div id="player0cards" class="handCards table-row">

        </div>
        <div id="player0value" class="value table-row">
        </div>
        <div class="table-row playerButtons">
          <div id="0" class="hit button table-col">Hit Me</div>
          <div id="stand" class="button table-col">Stand</div>
      </div>
    </div>

  </div>
</div>
<div class="table-row">
  <footer>
    <p></p>
    <p>Card faces thanks to <a href="https://www.waste.org/~oxymoron/cards/">oxymoron</a><br/>
      Card back thanks to <a href="https://commons.wikimedia.org/wiki/File:Bicyclebackside.jpg">Wikimedia Commons</a></p>

  </footer>
</div>
  <script>
    $( document ).ready();

    //attempt to make cards move
    $('#card').click(function() {
  $(this)
    .css({ position:'relative', left:0 })
    .rotate({ count:2, easing:'ease-in', animate:{ left:120 } })
    .fadeTo(400, 0.1)
    .fadeTo(300, 1)
    .delay(200)
    .rotate({ endDeg:-360, count:3, easing:'ease-out', animate:{ left:0 } });
});
    //make player name editable borrowed from http://jsfiddle.net/adamb/Hbww2/
    //plugin to make any element text editable
    $.fn.extend({
    	editable: function () {
    		$(this).each(function () {
    			var $el = $(this),
    			$edittextbox = $('<input type="text"></input>').css('min-width', $el.width()),
    			submitChanges = function () {
    				if ($edittextbox.val() !== '') {
    					$el.html($edittextbox.val());
    					$el.show();
    					$el.trigger('editsubmit', [$el.html()]);
    					$(document).unbind('click', submitChanges);
    					$edittextbox.detach();
    				}
    			},
    			tempVal;
    			$edittextbox.click(function (event) {
    				event.stopPropagation();
    			});

    			$el.dblclick(function (e) {
    				tempVal = $el.html();
    				$edittextbox.val(tempVal).insertBefore(this)
                    .bind('keypress', function (e) {
    					var code = (e.keyCode ? e.keyCode : e.which);
    					if (code == 13) {
    						submitChanges();
    					}
    				}).select();
    				$el.hide();
    				$(document).click(submitChanges);
    			});
    		});
    		return this;
    	}
    });

    //implement plugin
    $('.player-name').editable().on('editsubmit', function (event, val) {
        console.log('text changed to ' + val);
    });

    // start the game
    var game = new Blackjack();
    game.shuffleCards();

    $('#deal').click(function() {game.deal();});

    $('.hit').click(function() {
      game.players[$(this).attr('id')].hit();
    });
  </script>
  </body>
</html>
